<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="css/cadastro.css">
</head>

<body>

    <div class="container">
        <div class="left-content">
            <div class="buttonback">
                <a href="inicio.html"><img src="./assets/back button.png" alt="backbutton"></a>
            </div>
            <div class="position-logotipo">
                <a href="inicio.html"><img class="size-logotipo" src="./assets/logotipo01.png" alt="logotipo01"></a>
            </div>

            <div class="title">
                <span class="size-title">
                    SEJA BEM-VINDO <br> _
                </span>

            </div>
            <div class="slogan">
                <span class="size-slogan">
                    Preservando a excelência do vinho<br> através da tecnologia
                </span>
            </div>
        </div>

        <div class="right-content">
            <div class="titulo-right">
                <h3><b>Faça seu cadastro</b></h3>
            </div>
            <div class="inputs">
                <div>
                    <p id="texto_user">Nome</p>
                    <input type="text" id="ipt_user" placeholder="Nome" oninput="digitando_cad()"><br>
                    <span id="nome_erro">Prencher Nome</span>
                </div>

                <div>
                    <p id="texto_cnpj">Cnpj</p>
                    <input type="text" id="ipt_cnpj" placeholder="Cnpj" oninput="digitando_cad()"><br>
                    <span id="cnpj_erro">Cnpj invalido</span>
                </div>

                <div>
                    <p id="texto_email">E-mail</p>
                    <input type="text" id="ipt_email" placeholder="Email" oninput="digitando_cad()"><br>
                    <span id="email_erro">E-mail invalido</span>
                </div>

                <div>
                    <p id="texto_senha">Senha</p>
                    <input type="password" id="ipt_senha" placeholder="Senha" oninput="digitando_cad()"><br>
                    <span id="senha_erro">Senha invalida</span>
                </div>

                <div>
                    <p id="texto_confirmarsenha">Confirmarsenha</p>
                    <input type="password" id="ipt_confirmarsenha" placeholder="Confirmar Senha"
                        oninput="digitando_cad()"><br>
                    <span id="conf_senha_erro">Não coindide com a senha</span>
                    <div id="recomendacao_senha">
                        <ul>
                            <li id="minusculo">Um caractere minúsculo </li>
                            <li id="maiusculo">Um caractere maiúsculo</li>
                            <li id="numero">Um número</li>
                        </ul>
                        <ul>
                            <li id="especial">Um caractere especial</li>
                            <li id="minimo">Mínimo de 8 caracteres</li>
                        </ul>

                    </div>
                </div>
            </div>
            <div id="botom_esqueci">
                <button onclick="registro()">Cadastrar</button>
                <span id="campos_vazios">Prencher todos os campos!</span>
                <span style="display: flex; color: white;">
                    <p>Já possui uma conta? <a class="txt-laranja" href="login.html">Faça login</a></p>
                </span>
            </div>

        </div>

    </div>


</body>

</html>


<script>
    function digitando_cad() {
        ipt_user.value != '' ? (texto_user.style = "color:#DEA976", ipt_user.style = "    border-bottom: 1px solid #DEA976;") : null
        ipt_senha.value != '' ? (texto_senha.style = "color:#DEA976", ipt_senha.style = "    border-bottom: 1px solid #DEA976;") : null
        ipt_cnpj.value != '' ? (texto_cnpj.style = "color:#DEA976", ipt_cnpj.style = "    border-bottom: 1px solid #DEA976;") : null
        ipt_email.value != '' ? (texto_email.style = "color:#DEA976", ipt_email.style = "    border-bottom: 1px solid #DEA976;") : null
        ipt_senha.value != '' ? (recomendacao_senha.style = "color: grey") : null
        ipt_confirmarsenha.value != '' ? (texto_confirmarsenha.style = "color:#DEA976", ipt_confirmarsenha.style = "    border-bottom: 1px solid #DEA976;") : null
        var senha = ipt_senha.value
        var ax_especial = "!#$%&'()*+,-./:;<=>?@[\]^_`{|}~´`^~¨§ªº°"
        var temMaiusculo = false
        var temMinusculo = false
        var temNumero = false
        var temEspecial = false
        for (let i = 0; i < senha.length; i++) {
            const char = senha[i];

            if (!temMaiusculo && char >= "A" && char <= "Z") {
                temMaiusculo = true;
            }
            if (!temMinusculo && char >= "a" && char <= "z") {
                temMinusculo = true;
            }
            if (!temNumero && !isNaN(char)/*(Number(char)/Number(char) == 1)*/ && char !== ' ') {
                temNumero = true;
            }
            if (!temEspecial && ax_especial.includes(char)) {
                temEspecial = true;
            }
        }

        // Aplica estilos baseado no resultado final
        maiusculo.style.color = temMaiusculo ? "#DEA976" : "grey";
        minusculo.style.color = temMinusculo ? "#DEA976" : "grey";
        numero.style.color = temNumero ? "#DEA976" : "grey";
        especial.style.color = temEspecial ? "#DEA976" : "grey";
        minimo.style.color = senha.length > 9 ? "#DEA976" : "grey";
    }





    function registro() {
        var user = ipt_user.value;
        var cnpj = ipt_cnpj.value;
        var email = ipt_email.value;
        var senha = ipt_senha.value;
        var confirmarsenha = ipt_confirmarsenha.value;
        var validado = true;
        var temnumero = false;
        var temletra = false;
        var temletramaiscula = false;
        var temespaco = false;

        // Validando campos que estão vazios

        if (user === "" && cnpj === "" && email === "" && senha === "" && confirmarsenha === "") {
            campos_vazios.style = "display:flex"
        } else {

            // Validando usuario

            //  for (var i = 0; i < user.length; i++) {
            //      if (user[i] === " ") {
            //          temespaco = true;
            //      }
            // }

            if (user === "") {
                nome_erro.style = "display:flex"
                validado = false;
            } else if (user.length <= 3) {
                nome_erro.innerHTML = 'Erro... Não pode ter menos de 3 caracteres no usuário';
                nome_erro.style = "display:flex"
                validado = false;
            }

            // Validando cnpj

            temespaco = false;

            for (var i = 0; i < cnpj.length; i++) {
                if (cnpj[i] === " ") {
                    temespaco = true;
                    cnpj_erro.innerHTML = 'Erro... Cnpj não pode ter espaço em branco'
                    cnpj_erro.style = "display:flex"
                }
                if (cnpj[i] >= "A" && cnpj[i] <= "Z" || cnpj[i] >= "a" && cnpj[i] <= "z") {
                    temletra = true;
                    cnpj_erro.innerHTML = 'Erro... Cnpj não pode conter letras'
                    cnpj_erro.style = "display:flex"
                }
            }

            if (cnpj === "") {
                validado = false;
                cnpj_erro.innerHTML = 'Erro... Cnpj não pode conter letras'
                cnpj_erro.style = "display:flex"
            } else if (cnpj.length != 14) {
                validado = false;
                cnpj_erro.innerHTML = 'Erro... Cnpj precisa ter 14 digitos'
                cnpj_erro.style = "display:flex"
            } else if (cnpj.includes('@') || cnpj.includes('#') || cnpj.includes('$') || cnpj.includes('&') || cnpj.includes('_') || cnpj.includes('-') || cnpj.includes('+') || cnpj.includes('!') || cnpj.includes('?') || cnpj.includes('*') || cnpj.includes('/') || cnpj.includes('=') || cnpj.includes('<') || cnpj.includes('>') || cnpj.includes('~')) {
                validado = false;
                cnpj_erro.innerHTML = 'Erro... Cnpj não pode ter caracteres especiais'
                cnpj_erro.style = "display:flex"
                alert("1")
            } else if (temletra) {
                cnpj_erro.innerHTML = 'Erro... Não pode ter letras no cnpj'
                cnpj_erro.style = "display:flex"
                alert("2")
            }

            // Validando email

            temespaco = false;

            for (var i = 0; i < email.length; i++) {
                if (email[i] === " ") {
                    temespaco = true;
                }
            }
            var contandor_arroba = 0
            // verificar se tem mais de um @ 
            for (let i = 0; i < email.length; i++) {
                if (email.includes('@')) {
                    contandor_arroba++

                }
            }

            if (email === "") {
                validado = false;
                email_erro.style = "display:flex"
                email_erro.innerHTML = "Preencha o campo email"

            } else if (temespaco) {
                validado = false;
                email_erro.style = "display:flex"
                email_erro.innerHTML = "Erro... Email não pode conter espaços"
            } else if (!email.includes('@') || contandor_arroba > 1) {
                validado = false;
                console.log(contandor_arroba + "é este")
                email_erro.style = "display:flex"
                email_erro.innerHTML = "Erro... Email deve ter 1 (@)"
            } else if (!email.endsWith('.com')) {
                validado = false;
                email_erro.style = "display:flex"
                email_erro.innerHTML = "Erro... Email deve terminar com .com"
            }

            // Validando senha         

            temespaco = false;
            temletra = false;
            temnumero = false;//maiusculo
            var temminusculo = false;
            var temespecial = false
            var ax_especial = "!#$%&'()*+,-./:;<=>?@[\]^_`{|}~´`^~¨§ªº°"
            var temminimo = false
            for (var i = 0; i < senha.length; i++) {
                if (senha[i] === " ") {
                    temespaco = true;
                }
                if (senha[i] >= "A" && senha[i] <= "Z") {
                    temletra = true;
                }
                if (senha[i] >= "a" && senha[i] <= "z") {
                    temMinusculo = true
                }
                if (senha[i] >= 0 && senha[i] <= 9) {
                    temnumero = true;
                }
                if (ax_especial.includes(senha[i])) {
                    temespecial = true;
                }
                if (senha.length >= 8) {
                    temminimo = true
                }
            }
            if (senha === "") {
                validado = false;
                senha_erro.style = "display:flex"
                senha_erro.innerHTML = "Preencha o campo senha"
            } else {
                senha_erro.style = "display:none"
            }


            // Validando confirmar senha

            if (confirmarsenha === "") {
                alert('Preencha o campo confirmar senha');
                conf_senha_erro.style = "display:flex"
                conf_senha_erro.innerHTML = "Preencha o campo senha"
            } else if (confirmarsenha != senha) {
                alert('Erro... Senhas estão diferentes');
                conf_senha_erro.style = "display:flex"
                conf_senha_erro.innerHTML = "Preencha o campo senha"
            }

            if (validado) {
                alert('Cadastro realizado!')
            }

        }

    }


</script>