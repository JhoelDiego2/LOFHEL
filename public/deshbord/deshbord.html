<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOFHEL - Deshbord</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/geral.css">
    <link rel="stylesheet" href="css/deshbord.css">

</head>

<body>
    <div class="side-bar">
        <div class="nav">
            <img src="../deshbord/imagens-deshbord/logotipo01.png" alt="" style="width: 200px;">

            <p>Olá Fernanda Caramico, seja bem vindo(a)</p>

            <div class="nav-list">
                <div id="atual">
                    <a href="deshbord.html"><img src="../deshbord/imagens-deshbord/house.png" alt="icone">Inicio</a>
                </div>
                <div><a href="perfil.html"><img src="../deshbord/imagens-deshbord/person-circle.png"
                            alt="icone">Perfil</a>
                </div>
                <div><a href="funcionarios.html"><img src="../deshbord/imagens-deshbord/people.png"
                            alt="icone">Funcionarios</a>
                </div>
                <div><a href="armazens.html"><img src="../deshbord/imagens-deshbord/cube.png" alt="icone">Armazéns</a>
                </div>
                <div><a href="suporte-bob.html"><img src="../deshbord/imagens-deshbord/body.png"
                            alt="icone">Suporte-BobIA</a>
                </div>
                <div><a href="../inicio.html"><img src="../deshbord/imagens-deshbord/chevron-back-circle.png"
                            alt="icone">sair</a>
                </div>
            </div>
        </div>
    </div>
    <div class="main">
        <div class="header">
            <div class="topo">
                <div class="column-1">
                    <p id="title">Dashboard - <span id="nome_empresa">Vinícola Dom
                            Aurélio</span></p>
                    <div class="sub">

                        <div class="column-1">
                            <select name="armazem" id="armazem_atual" onclick="trocar1()"">
                                        <option value=" geral">Geral</option>
                                <option value="armazem1" ">Armazém1</option>
                                        <option value=" armazem2">Armazém2</option>
                                <option value="armazem3">Armazém3</option>
                                <option value="armazem3">Armazém4</option>
                                <option value="armazem3">Armazém5</option>
                            </select>
                        </div>
                        <div class="column-2">
                            <input type="date" name="Atual" id="Atualdia">
                        </div>
                    </div>
                </div>
                <div class="column-2">
                    <div>
                        <img src="../deshbord/imagens-deshbord/person-circle.png" alt="picture"
                            style="padding-right: 10px;">
                        <p> Fernanda Caramico </p>
                        <img src="../deshbord/imagens-deshbord/notifications.png" alt="" id="icone_notificacoes"
                            onclick="abrir_notificacoes()">
                    </div>
                </div>
            </div>

        </div>
<<<<<<< HEAD
        <div class="card-topo" >
            <div class="card pouco_texto"  >
                <p>Total de armzaéns</p>
                <h2 >5</h2>
            </div>
            <div class="card" style="background-color: rgb(231, 229, 123);">
                <p>Armzaéns fora da faixa ideal</p>
=======
        <div class="card-topo">
            <div class="card pouco_texto">
                <p>Total de Armazéns</p>
                <h2>5</h2>
            </div>
            <div class="card">
                <p>Armazéns fora da faixa ideal</p>
>>>>>>> 34d7a78a936441212a51aaea0da42754664eb3ca
                <h2>2</h2>
            </div>
            <div class="card pouco_texto" style="background-color: rgb(192, 113, 113);">
                <p>Alertas Ativos</p>
                <h2>4</h2>
            </div>
            <div class="card">
                <p>Total de alertas na semana</p>
                <h2>24</h2>
            </div>
            <div class="card">
                <p>Total de alertas na semana anterior</p>
                <h2>25</h2>
            </div>
        </div>
        <div class="container">


            <div class="column-1">
                <div class="grafico pizza">
                    <h4>Distribuição de Status dos Armazéns (%)</h4>
                    <div id="contem_grafico_redondo">
                        <canvas id="porcentagem_status"> </canvas>
                    </div>
                </div>
                <div class="grafico donut">
                    <h4>Distribuição de Status dos Sensores (%)</h4>
                    <div id="contem_grafico_redondo">
                        <canvas id="status_sensores"> </canvas>
                    </div>
                </div>
            </div>
            <div class="column-2">

                <div class="grafico linha">
                    <h4>Variação da Temperatura Média (Últimos 30 dias)</h4>
                   
                    <canvas id="variacao_temperatura_mensal" height="89rem"></canvas>
                </div>
                <div class="grafico linha">
                    <h4>Variação da Umidade Média (Últimos 30 dias)</h4>
<<<<<<< HEAD
                    <canvas id="variacao_umidade_mensal" height="89rem"></canvas>
=======
                    <canvas id="variacao_umidade_mensal" height="90rem"></canvas>
>>>>>>> 34d7a78a936441212a51aaea0da42754664eb3ca
                </div>
                <!--
                <div class="grafico barras">
                    <canvas id="myChart"></canvas>
                </div>
                -->
            </div>

            <div class="column-3">
                <div class="grafico barras">
                    <h4>Alertas Ativos Em Cada Armazém</h4>
                    <canvas id="ranking_grafico" height="560rem"></canvas>
                </div>
                <div class="grafico barras" style="z-index:-10; display: none;" id="teste">
                    <h4>Tipos de Alertas Registrados (semana atual)</h4>
                    <canvas id="tipos_alerta" height="240rem"></canvas>
                </div>

                <div class="notificacoes" id="notificacao_caixa" style="display: none; z-index: 10;">
                    <h4>Ultimas notificacoes <span><img src="../deshbord/imagens-deshbord/chevron-back-circle.png"
                                alt="" id="icone_fechar" onclick="fechar_notificacoes()"></span> </h4>
                    <div class="notificacao">
                        <img src="../deshbord/imagens-deshbord/notifications.png">
                        <p>Armazém 1 <br> <span>Temperatura acima do
                                recomendado</span></p>
                    </div>
                    <div class="notificacao">
                        <img src="../deshbord/imagens-deshbord/notifications.png">
                        <p>Armazém 2<br> <span>Temperatura acima do
                                recomendado</span></p>
                    </div>
                    <div class="notificacao">
                        <img src="../deshbord/imagens-deshbord/notifications.png">
                        <p>Armazém 3 <br><span>Temperatura acima do
                                recomendado</span></p>
                    </div>
                    <div class="notificacao">
                        <img src="../deshbord/imagens-deshbord/notifications.png">
                        <p>Armazém 4 <br><span>Temperatura acima do
                                recomendado</span></p>
                    </div>
                    <div class="notificacao">
                        <img src="../deshbord/imagens-deshbord/notifications.png">
                        <p>Armazém 5 <br><span>Temperatura acima do
                                recomendado</span></p>
                    </div>
                </div>

            </div>
        </div>
    </div>
</body>

</html>

<script>
    function trocar1() {
        var select = armazem_atual.value
        if (select == 'armazem1') {
            window.location.href = "deshbord-armazem1.html";
        }
        if (select == 'armazem3') {
            window.location.href = "deshbord-armazem3.html";

        }
    }


    var notificacao_aberta = false
    // abrir as notificaoes
    function abrir_notificacoes() {
        if (notificacao_aberta == false) {
            notificacao_caixa.style = "display: 1 "
            notificacao_aberta = true
        } else {
            notificacao_caixa.style = "display: none "
            notificacao_aberta = false

        }


    }
    function fechar_notificacoes() {
        notificacao_caixa.style = "display:none"
    }

    // so colocando valor no input
    Atualdia.value = "2025-04-14"
    //graficos com chart js
    // grafico do tipo barra
    const ctx = document.getElementById('myChart');

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho'],
            datasets: [{
                label: 'Temperatura Média',
                data: [22, 24, 27, 23, 20, 18],
                backgroundColor: [
                    'rgb(255, 140, 0)',
                    'rgb(255, 140, 0)',
                    'rgb(255, 140, 0)',
                    'rgb(255, 140, 0)',
                    'rgb(255, 140, 0)',
                    'rgb(255, 140, 0)'
                ],
                borderWidth: 1
            },
            {
                label: 'Umidade Média',
                data: [90, 89, 93, 87, 88, 82],
                backgroundColor: [
                    'rgb(0, 102, 255)',
                    'rgb(0, 102, 255)',
                    'rgb(0, 102, 255)',
                    'rgb(0, 102, 255)',
                    'rgb(0, 102, 255)',
                    'rgb(0, 102, 255)'
                ],
                borderWidth: 1
            }
            ],
        },
    });


    // grafico do tipo pizza 

    /*Primero declaramos a data e depois criamos o grafico usando algo parecido a um procedimento e depois plotamos no html*/
    const data_pizza = {
        labels: [
            'Faixa ideal',
            'Alertas leves',
            'Alertas críticos'
        ],
        datasets: [{
            label: 'Status dos Armazéns (%)',
            data: [60, 20, 20],

            backgroundColor: [
                'rgb(158, 73, 99)', // Vermelho 
                'rgb(189, 115, 137)',  // Amarelo 
                '#4c1130', // Verde 

            ],
            hoverOffset: 5
        }]
    };
    const pizza = {
        type: 'pie',
        data: data_pizza,
        // usando options para colocar a legenda embaixo do grafico
        options: {
            plugins: {
                legend: {
                    position: 'bottom', // Coloca a legenda embaixo do gráfico
                    labels: {
                        color: 'black', // Cor da fonte da legenda
                        font: {
                            size: 12
                        }
                    }
                },
            }
        }

    };
    const myChart_pizza = document.getElementById('porcentagem_status');
    new Chart(myChart_pizza, pizza);

    // grafico de donunts -------------------------------------------------------------

    const data_status_sensores = {
        labels: [
            'Ativo',
            'Inativo',
            'Em manutenção'
        ],
        datasets: [{
            label: 'status',
            data: [10, 1, 1],
            backgroundColor: [
            'rgb(158, 73, 99)', // Vermelho 
                'rgb(189, 115, 137)',  // Amarelo 
                '#4c1130', // Verde 
            ],
            hoverOffset: 3
        }]
    };
    const donunts = {
        type: 'doughnut',
        data: data_status_sensores,
        options: {
            plugins: {
                legend: {
                    position: 'bottom', // Coloca a legenda embaixo do gráfico
                    labels: {
                        color: 'black', // Cor da fonte da legenda
                        font: {
                            size: 12
                        }
                    }
                },
            }
        }
    };
    const myChart_donuts = document.getElementById('status_sensores');
    new Chart(myChart_donuts, donunts);

    // grafico de ranking de alertas ativos por armazem -------------------------------------------------------------

    const myChart_barra_status = document.getElementById('ranking_grafico');

    new Chart(myChart_barra_status, {
        type: 'bar',
        data: {
            labels: ['Armazém 1', 'Armazém 2', 'Armazém 3', 'Armazém 4', 'Armazém 5'],
            datasets: [{
                label: 'Alertas Ativos',
                data: [2, 0, 1, 0, 1],
                backgroundColor:
                    '#4c1130',

                borderColor: '#4c1130',
                borderWidth: 1
            }],
        },
    });
    // grafico do tipo linha-------------------------------------------------------------
    let ideal = document.getElementById("ipt_umidade_ideal");

    const labels = [
        '1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30',
    ]
    const data_var_temp = {
        labels: labels,
        datasets: [{
            label: 'Temperatura Média',
            data:
                [15.2,15.5,15.8,16.1,16.4,16.7,17.0,16.8,16.5,16.2,15.9,15.6,15.3,15.0,14.8,14.5,15.4,14.1,14.4,14.7,15.0,15.3,15.6,15.9,16.2,16.5,16.8,17.1,16.9,16.6],
            fill: false,
            borderColor: '#551c36',
            backgroundColor: '#551c36',
            tension: 0.1
        },
        ]
    };
    const config_var_temp = {
        type: 'line',
        data: data_var_temp,
    };
    const myChart_var_temp = document.getElementById('variacao_temperatura_mensal');
    new Chart(myChart_var_temp, config_var_temp);

    // grafico do tipo linha-------------------------------------------------------------

    const labels_umidade = ['1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30',
    ]
    const data_var_umidade = {
        labels: labels,
        datasets: [{
            label: 'Umidade Média',
            data:
                [
                    68,
                    69,
                    70,
                    71,
                    68,
                    69,
                    70,
                    71,
                    72,
                    71,
                    70,
                    69,
                    68,
                    67,
                    66,
                    65,
                    64,
                    63,
                    64,
                    65,
                    66,
                    67,
                    68,
                    69,
                    70,
                    71,
                    72,
                    73,
                    72,
                    71
                ],




            fill: true,
            borderColor: 'rgba(240, 248, 255, 0)',
            backgroundColor: 'rgb(158, 73, 99',
            tension: 0.1
        },
        ]
    };
    const config_var_umidade = {
        type: 'line',
        data: data_var_umidade,
    };
    const myChart_var_umidade = document.getElementById('variacao_umidade_mensal');
    new Chart(myChart_var_umidade, config_var_umidade);


    /// grafico barra tipos de alertas

    const tipos_alerta = document.getElementById('tipos_alerta');

    new Chart(tipos_alerta, {
        type: 'bar',
        data: {
            labels: ['Temperatura alta', 'Temperatura Baixa', 'Umidade Alta', 'Umidade Baixa', 'Falha de equipamento'],
            datasets: [{
                label: 'Tipo de alerta',
                data: [7, 10, 2, 4, 1],
                backgroundColor: [
                    'rgb(255, 140, 0)',
                    'blue',
                    'rgb(255, 140, 0)',
                    'blue',
                    'grey',
                ],
                borderWidth: 1
            }
            ],
        },
    });

</script>